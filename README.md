# Лабораторная работа №4. Симуляция с пользовательсĸими ĸоллеĸциями и псевдослучайной моделью 

**Цель:** Реализовать систему управления библиотекой, используя принципы ООП и протестировать её работу через случайную симуляцию

## 1) Установка проекта
```bash
git clone https://github.com/andreylobachev/python-lab4-simulation
cd python-lab4-simulation
python3.14 -m venv venv
source venv/bin/activate
pip install -e .
```
---

## 2) Реализованный функционал

| Категория | Функции / Классы / Аргументы |
| --- | --- |
| **Сущности (Entities)** | `Book`, `PaperBook` (страницы, обложка), `EBook` (размер файла, формат) |
| **Коллекции** | `BookCollection` (с поддержкой итерации и срезов), `IndexDict` |
| **Библиотека** | `Library` (методы: `add_book`, `remove_book`, `search_author`, `search_year`) |
| **Симуляция** | `run_simulation` (аргументы: `steps`, `seed`), `generate_random_book` |

---

## 3) Запуск программы и режимы работы

### Запуск симуляции (По умолчанию)

Программа запускает цикл случайных событий в библиотеке, демонстрируя все возможности системы:

```bash
python -m src.main
```

### Пример вывода симуляции (по умолчанию значение steps в main.py равно 15)

```text
=== ЗАПУСК СИМУЛЯЦИИ БИБЛИОТЕКИ ===
--- НАЧАЛО СИМУЛЯЦИИ (СЛУЧАЙНЫЙ ЗАПУСК) ---
   [INIT] Создана книга: [E-Book] '1984' (Джордж Оруэлл, 1949) [Антиутопия] - 4.7 MB
   [INIT] Создана книга: [Paper] 'Война и Мир' (Лев Толстой, 1869) [Классика] - 1200 стр.
   
Шаг 01 | Действие: ПОИСК ГОДА 1949: Найдено 1 шт.
Шаг 02 | Действие: ДОБАВЛЕНИЕ: [Paper] 'Дюна' (Фрэнк Герберт, 1965) [Фантастика] - 600 стр.
Шаг 03 | Действие: УДАЛЕНИЕ: '1984' (ISBN: 978-X-XXXX-XXXX-X)
Шаг 04 | Действие: ПОИСК АВТОРА 'Лев Толстой': Найдено 1 шт.
...
--- СИМУЛЯЦИЯ ЗАВЕРШЕНА ---

```

---

## 4) Тесты

Для запуска автоматизированных тестов (проверка логики коллекций, корректности ISBN и работы индексов):

```bash
pytest -v
```

---

## 5) Допущения

* **ISBN:** Используется как уникальный инвентарный номер экземпляра (Primary Key), генерируется в формате `978-X-XXXX-XXXX-X`
* **Поиск по году/автору:** Возвращает список всех найденных совпадений через `IndexDict`
* **Сравнение книг:** Книги считаются идентичными, если их ISBN совпадают (метод `__eq__`)
* **Жанры:** Присваиваются случайным образом из списка констант для демонстрации универсальности системы
* **Пара: автор + книга:** Также устанавливается случайным образом, как и жанры

---

## 6) Используемые библиотеки и модули
| Категория | Модуль | Назначение |
| --- | --- | --- |
| **ООП** | `dataclasses` | Использование `@dataclass` для лаконичного описания моделей книг |
| **Типизация** | `typing` | Аннотации типов (`List`, `Any`, `Union`, `Dict`)  |
| **Генерация** | `random` | Случайный выбор названий, авторов и генерация уникальных ISBN |

---

## 7) Чему я научился

* Освоил применение **наследования** и **полиморфизма** на примере иерархии классов книг (`PaperBook`, `EBook`)
* Научился переопределять магические методы Python: `__repr__` (отображение), `__len__` (размер), `__getitem__` (доступ по индексу и срезы), `__eq__` (сравнение)
* Реализовал структуру данных для поиска с использованием **хэш-таблиц** (`IndexDict` на базе `dict`)
* Понял принципы работы **инкапсуляции**, скрыв внутреннее хранение данных в коллекциях за интерфейсом методов
